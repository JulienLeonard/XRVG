<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>Bezier curves</title>
    <meta name="generator" content="muse.el">
    <meta http-equiv="Content-Type"
          content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="stylesheets/styles.css" />
  </head>
  <body>
  <h1>Bezier curves</h1>

<h2>Basics</h2>

<h3>Introduction</h3>

<p>
In XRVG, Bezier objects are cubic bezier curves, that can be drawn or used as a mean to computation.
</p>

<p>
Basically, bezier curves are defined by four vector parameters:
<ul>
<li>two for first and last points of the curve. </li>
<li>two for the shape of the curve, by specifying tangents at first and last points. </li>
</ul>

</p>

<p>
Once these parameters are specified, you can get the folowing result:
<table class="xrvgexample" cellpadding="0" cellspacing="0" border="0" width="100%" summary="">
	<tr>
          <td class="xrvgimage"  align="center" nowrap="nowrap"  border="0">
<center>
<p><img src="images/bezierbasic.png" alt=""></p>
</center>

</td>
	  <td class="xrvgscript" align="left"   nowrap="nowrap"  border="0"><pre class="src">
require <span style="color: #008b00;">'xrvg'</span>
include <span style="color: #4682b4;">XRVG</span>

render = <span style="color: #4682b4;">SVGRender</span>[ <span style="color: #9b30ff;">:filename</span>, <span style="color: #008b00;">"bezierbasic.svg"</span> ]
bezier = <span style="color: #4682b4;">Bezier</span>.raw( <span style="color: #4682b4;">V2D</span>[0.0, 1.0], <span style="color: #4682b4;">V2D</span>[1.0, 1.0], <span style="color: #4682b4;">V2D</span>[0.0, 0.0], <span style="color: #4682b4;">V2D</span>[1.0, 0.0] )
render.add( bezier, <span style="color: #4682b4;">Style</span>[ <span style="color: #9b30ff;">:stroke</span>, <span style="color: #008b00;">"blue"</span>, <span style="color: #9b30ff;">:strokewidth</span>, 0.1 ] )
bezier.gdebug( render )
render.end
</pre></td>
        </tr>
      </table>


</p>

<h3>Bezier specification</h3>

<p>
XRVG provides several ways to specify these parameters:
<ul>
<li>a "raw" way, as defined by SVG </li>
<li>a "vector" way, specifiying vectors instead of control points, and sequencing pairs of parameters </li>
</ul>

</p>

<h4>Raw way</h4>

<p>
This is the way of the previous example:
<table class="xrvgexample" cellpadding="0" cellspacing="0" border="0" width="100%" summary="">
	<tr>
          <td class="xrvgimage"  align="center" nowrap="nowrap"  border="0">
<center>
<p><img src="images/bezierbasic.png" alt=""></p>
</center>

</td>
	  <td class="xrvgscript" align="left"   nowrap="nowrap"  border="0"><pre class="src">
require <span style="color: #008b00;">'xrvg'</span>
include <span style="color: #4682b4;">XRVG</span>

render = <span style="color: #4682b4;">SVGRender</span>[ <span style="color: #9b30ff;">:filename</span>, <span style="color: #008b00;">"bezierbasic.svg"</span> ]
bezier = <span style="color: #4682b4;">Bezier</span>.raw( <span style="color: #4682b4;">V2D</span>[0.0, 1.0], <span style="color: #4682b4;">V2D</span>[1.0, 1.0], <span style="color: #4682b4;">V2D</span>[0.0, 0.0], <span style="color: #4682b4;">V2D</span>[1.0, 0.0] )
render.add( bezier, <span style="color: #4682b4;">Style</span>[ <span style="color: #9b30ff;">:stroke</span>, <span style="color: #008b00;">"blue"</span>, <span style="color: #9b30ff;">:strokewidth</span>, 0.1 ] )
bezier.gdebug( render )
render.end
</pre></td>
        </tr>
      </table>


</p>

<p>
Parameters are:
<ul>
<li>first is the first point of the curve </li>
<li>second is the control point of the first point of the curve </li>
<li>third is the control point of the last point of the curve </li>
<li>last is the last point of the curve </li>
</ul>

</p>

<h4>Vector way</h4>

<p>
Sometimes, it is easier to see control points as vectors, since specifying vectors is relative to first and last points. As a consequence,
curve points provide localization of the curve, while vectors provide shape.
</p>

<p>
Furthermore, vector bezier specification is sequential: each point of the curve (first or last) is followed by its vector. 
</p>

<p>
Parameters are then:
<ul>
<li>first is the first point of the curve </li>
<li>second is the shape vector of the first point </li>
<li>third is the last point of the curve </li>
<li>last is the shape vector of the last point </li>
</ul>

</p>

<table class="xrvgexample" cellpadding="0" cellspacing="0" border="0" width="100%" summary="">
	<tr>
          <td class="xrvgimage"  align="center" nowrap="nowrap"  border="0">
<center>
<p><img src="images/bezierbasicvector.png" alt=""></p>
</center>

</td>
	  <td class="xrvgscript" align="left"   nowrap="nowrap"  border="0"><pre class="src">
require <span style="color: #008b00;">'xrvg'</span>
include <span style="color: #4682b4;">XRVG</span>

render = <span style="color: #4682b4;">SVGRender</span>[ <span style="color: #9b30ff;">:filename</span>, <span style="color: #008b00;">"bezierbasicvector.svg"</span> ]
bezier = <span style="color: #4682b4;">Bezier</span>.vector( <span style="color: #4682b4;">V2D</span>[0.0, 1.0], <span style="color: #4682b4;">V2D</span>[1.0, 0.0], <span style="color: #4682b4;">V2D</span>[1.0, 0.0], <span style="color: #4682b4;">V2D</span>[-1.0, 0.0] )
render.add( bezier, <span style="color: #4682b4;">Style</span>[ <span style="color: #9b30ff;">:stroke</span>, <span style="color: #008b00;">"blue"</span>, <span style="color: #9b30ff;">:strokewidth</span>, 0.1 ] )
bezier.gdebug( render )
render.end
</pre></td>
        </tr>
      </table>



<p>
In the example, the symetry of the two vector shapes is clear, which was not the case in previous raw example.
</p>

<h3>Multicurve</h3>

<p>
Bezier curves are quite powerful, but in order to draw interesting and controlled shapes, it is often required to define a curve made of
several concatenated bezier subcurves.
</p>

<p>
XRVG allows multibezier curves definition as in the following example:
</p>

<table class="xrvgexample" cellpadding="0" cellspacing="0" border="0" width="100%" summary="">
	<tr>
          <td class="xrvgimage"  align="center" nowrap="nowrap"  border="0">
<center>
<p><img src="images/multibezierbasic.png" alt=""></p>
</center>

</td>
	  <td class="xrvgscript" align="left"   nowrap="nowrap"  border="0"><pre class="src">
require <span style="color: #008b00;">'xrvg'</span>
include <span style="color: #4682b4;">XRVG</span>

render = <span style="color: #4682b4;">SVGRender</span>[ <span style="color: #9b30ff;">:filename</span>, <span style="color: #008b00;">"multibezierbasic.svg"</span> ]
bezier = <span style="color: #4682b4;">Bezier</span>.multi( [[<span style="color: #9b30ff;">:vector</span>, <span style="color: #4682b4;">V2D</span>[0.0, 1.0], <span style="color: #4682b4;">V2D</span>[1.0, 0.0], <span style="color: #4682b4;">V2D</span>[1.0, 0.0], <span style="color: #4682b4;">V2D</span>[-1.0, 0.0]],
                        [<span style="color: #9b30ff;">:vector</span>, <span style="color: #4682b4;">V2D</span>[1.0, 0.0], <span style="color: #4682b4;">V2D</span>[1.0, 0.0], <span style="color: #4682b4;">V2D</span>[2.0, 1.0], <span style="color: #4682b4;">V2D</span>[-1.0, 0.0]]] )
render.add( bezier, <span style="color: #4682b4;">Style</span>[ <span style="color: #9b30ff;">:stroke</span>, <span style="color: #008b00;">"blue"</span>, <span style="color: #9b30ff;">:strokewidth</span>, 0.1 ] )
bezier.gdebug( render )
render.end
</pre></td>
        </tr>
      </table>



<p>
Note: this section will be soon updated, to describe some more powerful ways to describe multibezier curves, in particular when they are "regular"
</p>


<h2>Dash</h2>

<p>
To illustrate XRVG samplation advantages, let's discuss dashing a bezier curve.
</p>

<h3>Simple dash</h3>

<p>
For the moment, the simpler way to do dashing with XRVG is the following:
</p>

<table class="xrvgexample" cellpadding="0" cellspacing="0" border="0" width="100%" summary="">
	<tr>
          <td class="xrvgimage"  align="center" nowrap="nowrap"  border="0">
<center>
<p><img src="images/simpledash.png" alt=""></p>
</center>

</td>
	  <td class="xrvgscript" align="left"   nowrap="nowrap"  border="0"><pre class="src">
require <span style="color: #008b00;">'xrvg'</span>
include <span style="color: #4682b4;">XRVG</span>

render = <span style="color: #4682b4;">SVGRender</span>[ <span style="color: #9b30ff;">:filename</span>, <span style="color: #008b00;">"simpledash.svg"</span> ]
bezier = <span style="color: #4682b4;">Bezier</span>.raw( <span style="color: #4682b4;">V2D</span>[0.0, 1.0], <span style="color: #4682b4;">V2D</span>[1.0, 1.0], <span style="color: #4682b4;">V2D</span>[0.0, 0.0], <span style="color: #4682b4;">V2D</span>[1.0, 0.0] )
bezier.splits( 30 ).foreach <span style="color: #ee0000;">do</span> |drawn,dummy|
    render.add( drawn, <span style="color: #4682b4;">Style</span>[ <span style="color: #9b30ff;">:stroke</span>, <span style="color: #008b00;">"blue"</span>, <span style="color: #9b30ff;">:strokewidth</span>, 0.1  ] )
<span style="color: #ee0000;">end</span>
render.end
</pre></td>
        </tr>
      </table>



<p>
That is : 
<ul>
<li>use Splittable interface to split bezier curve into sub bezier curves </li>
<li>draw only first sub curve on two consecutive ones </li>
</ul>

</p>

<h3>Geo dash</h3>

<p>
A far more interesting example is to use some sample filter to add pattern on dash.
</p>

<p>
As an example:
</p>

<table class="xrvgexample" cellpadding="0" cellspacing="0" border="0" width="100%" summary="">
	<tr>
          <td class="xrvgimage"  align="center" nowrap="nowrap"  border="0">
<center>
<p><img src="images/geodash.png" alt=""></p>
</center>

</td>
	  <td class="xrvgscript" align="left"   nowrap="nowrap"  border="0"><pre class="src">
require <span style="color: #008b00;">'xrvg'</span>
include <span style="color: #4682b4;">XRVG</span>

render = <span style="color: #4682b4;">SVGRender</span>[ <span style="color: #9b30ff;">:filename</span>, <span style="color: #008b00;">"geodash.svg"</span> ]
bezier = <span style="color: #4682b4;">Bezier</span>.raw( <span style="color: #4682b4;">V2D</span>[0.0, 1.0], <span style="color: #4682b4;">V2D</span>[1.0, 1.0], <span style="color: #4682b4;">V2D</span>[0.0, 0.0], <span style="color: #4682b4;">V2D</span>[1.0, 0.0] )
bezier.geo(2.0).splits( 30 ).foreach <span style="color: #ee0000;">do</span> |drawn,dum|
    render.add( drawn, <span style="color: #4682b4;">Style</span>[ <span style="color: #9b30ff;">:stroke</span>, <span style="color: #008b00;">"blue"</span>, <span style="color: #9b30ff;">:strokewidth</span>, 0.1 ] )
<span style="color: #ee0000;">end</span>
render.end
</pre></td>
        </tr>
      </table>



<p>
Combining with radius decreasing yields to a quite interesting result:
</p>

<table class="xrvgexample" cellpadding="0" cellspacing="0" border="0" width="100%" summary="">
	<tr>
          <td class="xrvgimage"  align="center" nowrap="nowrap"  border="0">
<center>
<p><img src="images/geodash2.png" alt=""></p>
</center>

</td>
	  <td class="xrvgscript" align="left"   nowrap="nowrap"  border="0"><pre class="src">
require <span style="color: #008b00;">'xrvg'</span>
include <span style="color: #4682b4;">XRVG</span>

render = <span style="color: #4682b4;">SVGRender</span>[ <span style="color: #9b30ff;">:filename</span>, <span style="color: #008b00;">"geodash2.svg"</span> ]
bezier = <span style="color: #4682b4;">Bezier</span>.raw( <span style="color: #4682b4;">V2D</span>[0.0, 1.0], <span style="color: #4682b4;">V2D</span>[1.0, 1.0], <span style="color: #4682b4;">V2D</span>[0.0, 0.0], <span style="color: #4682b4;">V2D</span>[1.0, 0.0] )
[bezier.geo(2.0).splits( 30 ), (0.1..0.0).samples(30)].forzip <span style="color: #ee0000;">do</span> |drawn,width,dum,dum|
    render.add( drawn, <span style="color: #4682b4;">Style</span>[ <span style="color: #9b30ff;">:stroke</span>, <span style="color: #008b00;">"blue"</span>, <span style="color: #9b30ff;">:strokewidth</span>, width ] )
<span style="color: #ee0000;">end</span>
render.end
</pre></td>
        </tr>
      </table>



<p>
As a note, iteration in previous example should be improved in future XRVG releases.
</p>

<h3>Random dash</h3>

<p>
As a random try:
</p>

<table class="xrvgexample" cellpadding="0" cellspacing="0" border="0" width="100%" summary="">
	<tr>
          <td class="xrvgimage"  align="center" nowrap="nowrap"  border="0">
<center>
<p><img src="images/randomdash.png" alt=""></p>
</center>

</td>
	  <td class="xrvgscript" align="left"   nowrap="nowrap"  border="0"><pre class="src">
require <span style="color: #008b00;">'xrvg'</span>
include <span style="color: #4682b4;">XRVG</span>

render = <span style="color: #4682b4;">SVGRender</span>[ <span style="color: #9b30ff;">:filename</span>, <span style="color: #008b00;">"randomdash.svg"</span> ]
bezier = <span style="color: #4682b4;">Bezier</span>.raw( <span style="color: #4682b4;">V2D</span>[0.0, 1.0], <span style="color: #4682b4;">V2D</span>[1.0, 1.0], <span style="color: #4682b4;">V2D</span>[0.0, 0.0], <span style="color: #4682b4;">V2D</span>[1.0, 0.0] )
[bezier.ssort.random.splits( 30 ), (0.1..0.0).rand(30)].forzip <span style="color: #ee0000;">do</span> |drawn,width,dum,dum|
    render.add( drawn, <span style="color: #4682b4;">Style</span>[ <span style="color: #9b30ff;">:stroke</span>, <span style="color: #008b00;">"blue"</span>, <span style="color: #9b30ff;">:strokewidth</span>, width ] )
<span style="color: #ee0000;">end</span>
render.end
</pre></td>
        </tr>
      </table>



  </body>
</html>
